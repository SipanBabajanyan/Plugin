# Инструкция по установке плагина Subscription Link Payment

## Требования

- WordPress 5.0 или выше
- WooCommerce 5.0 или выше  
- PHP 7.4 или выше
- MySQL 5.6 или выше

## Установка

### 1. Загрузка плагина

1. Скачайте все файлы плагина в папку `/wp-content/plugins/subscription-link/`
2. Убедитесь, что структура папок выглядит следующим образом:

```
wp-content/plugins/subscription-link/
├── subscription-link.php
├── includes/
│   ├── class-woocommerce-integration.php
│   ├── class-payment-handler.php
│   ├── class-admin-interface.php
│   └── class-subscription-manager.php
├── templates/
│   ├── quick-payment.php
│   ├── admin-dashboard.php
│   ├── admin-create.php
│   └── admin-settings.php
├── assets/
│   ├── css/
│   │   ├── frontend.css
│   │   └── admin.css
│   └── js/
│       ├── frontend.js
│       └── admin.js
├── languages/
├── readme.txt
├── PLAN.md
├── PROGRESS.md
└── INSTALLATION.md
```

### 2. Активация плагина

1. Войдите в админ-панель WordPress
2. Перейдите в **Плагины** → **Установленные плагины**
3. Найдите "Subscription Link Payment" и нажмите **Активировать**

### 3. Проверка зависимостей

Убедитесь, что WooCommerce установлен и активирован:
1. Перейдите в **Плагины** → **Установленные плагины**
2. Если WooCommerce не установлен, установите его из **Плагины** → **Добавить новый**
3. Активируйте WooCommerce

## Настройка

### 1. Первоначальная настройка

1. Перейдите в **Subscription Links** → **Settings**
2. Настройте основные параметры:
   - Валюта по умолчанию
   - Email уведомления
   - Email администратора
   - Заголовок страницы оплаты
   - URL для перенаправления после оплаты

### 2. Создание товара для подписки

1. Перейдите в **Товары** → **Добавить новый**
2. Создайте товар как обычно
3. В разделе **Данные товара** → **Общие**:
   - Установите цену товара
   - Отметьте галочку **"Товар для подписки"**
   - При необходимости укажите **"Сумма подписки"** (если отличается от цены товара)
4. Опубликуйте товар

### 3. Создание ссылки подписки

1. Перейдите в **Subscription Links** → **Create New**
2. Выберите товар из списка
3. Укажите сумму подписки (или оставьте пустым для использования цены товара)
4. При необходимости укажите имя и email клиента
5. Нажмите **"Create Subscription Link"**
6. Скопируйте сгенерированную ссылку

## Использование

### Для клиентов

1. Клиент переходит по ссылке подписки
2. На странице быстрой оплаты выбирает способ оплаты
3. Нажимает **"Оплатить сейчас"**
4. Перенаправляется на страницу оплаты WooCommerce
5. Завершает оплату как обычно

### Для администратора

1. **Просмотр подписок**: **Subscription Links** → **All Subscriptions**
2. **Создание новых**: **Subscription Links** → **Create New**
3. **Настройки**: **Subscription Links** → **Settings**
4. **Статистика**: Просмотр в админ-панели подписок

## Функции

### Основные возможности

- ✅ Создание постоянных ссылок для подписок
- ✅ Минимальная страница оплаты без форм
- ✅ Автоматическое создание заказов WooCommerce
- ✅ Интеграция со всеми методами оплаты WooCommerce
- ✅ Безопасные криптографические токены
- ✅ Админ-панель для управления
- ✅ Статистика платежей
- ✅ Email уведомления
- ✅ Массовые операции с подписками

### Безопасность

- Каждая ссылка защищена уникальным 64-символьным токеном
- Валидация всех входящих данных
- Защита от CSRF атак
- Проверка прав доступа для всех операций

## Устранение неполадок

### Плагин не активируется

1. Убедитесь, что WooCommerce установлен и активирован
2. Проверьте версию PHP (должна быть 7.4+)
3. Проверьте права доступа к файлам плагина

### Ссылки не работают

1. Убедитесь, что страница `/subscription-payment/` создана
2. Проверьте настройки постоянных ссылок WordPress
3. Очистите кэш плагина

### Ошибки оплаты

1. Проверьте настройки методов оплаты WooCommerce
2. Убедитесь, что товар активен и в наличии
3. Проверьте логи ошибок WordPress

### Email уведомления не отправляются

1. Проверьте настройки SMTP WordPress
2. Убедитесь, что в настройках плагина включены уведомления
3. Проверьте спам-папку

## Поддержка

При возникновении проблем:

1. Проверьте логи ошибок WordPress
2. Убедитесь, что все требования выполнены
3. Проверьте совместимость с другими плагинами
4. Обратитесь к разработчику

## Обновления

При обновлении плагина:

1. Сделайте резервную копию сайта
2. Деактивируйте плагин
3. Замените файлы плагина
4. Активируйте плагин
5. Проверьте работоспособность

## Удаление

Для полного удаления плагина:

1. Деактивируйте плагин
2. Удалите папку плагина
3. При необходимости удалите таблицы базы данных:
   - `wp_subscription_links`
   - `wp_subscription_payments_log`
